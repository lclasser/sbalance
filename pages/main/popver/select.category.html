<style>.list-group-item.focus:not(:hover){color:#e9e6e6;background-color:#555}</style><page class="d-block h-100 p-0 pb-2 pt-2 w-80" style=position:fixed;margin:auto;left:0;right:0;top:0;width:80%;display:none onopen=onOpened(this) onload=onLoaded(this) onclose=onClosed(this)><div id=dialog_modal class="align-items-center d-flex fade justify-content-center modal position-relative show" tabindex=-1 role=dialog data-bs-focus=false data-bs-backdrop=static aria-labelledby=dialog_modal aria-hidden=true><div class="m-0 modal-dialog modal-dialog-centered modal-dialog-scrollable sb-modal" role=document style=min-width:100%><div class=modal-content><div class=modal-header><h5 class=modal-title id=modal_title>분류 선택</h5><button class=btn-close type=button data-bs-dismiss=modal aria-label=Close></button></div><div class="modal-body overflow-auto"><div id=dlg_list></div></div><div class=modal-footer><button type=button id=modal_ok class="btn btn-lg btn-primary">설정</button> <button type=button class="btn btn-lg btn-secondary" data-bs-dismiss=modal>취소</button></div></div></div></div></page><script>function onOpened(l){console.log("dpopver:",l);var s=l.getParam();function o(i,a){var t="pvgroup_"+a.ci_idx,e=$("<div/>").addClass("sb-card card border w-100 mb-1").html(`
    <div class="card-header d-flex align-items-center p-1" style="height:35px;">
        <div class="me-auto" id="item_title"></div>
        <div class="ms-1 ps-4">
            <button type="button" class="transparent-bgcolor"
                data-bs-toggle="collapse" data-bs-target=".group_x" aria-expanded="false" aria-controls=".group_x">
                <div class="collapse hide group_x"><img style="height:24px;" src="https://lclasser.github.io/sbalance/public/image/card_down.svg"></div>
                <div class="collapse show group_x"><img style="height:24px;" src="https://lclasser.github.io/sbalance/public/image/card_up.svg"></div>
            </button>
        </div>
    </div>
    <div class="card-body p-0">
        <ul class="list-group list-group-flush collapse show group_x"></ul>
    </div>
    </ul>`);return e.find("#item_title").html(a.cg_name),e.find(".group_x").removeClass("group_x").addClass(t),e.find('[data-bs-target=".group_x"]').attr("data-bs-target","."+t),e.find('[aria-controls=".group_x"]').attr("aria-controls",t),i.append(e),e}function c(i,a,t){t=$(`<li class="list-group-item list-group-item-action ${1==t?"active":""}"
                ci_idx="${a.ci_idx}"
                ci_name="${a.ci_name}"
                cg_name="${a.cg_name}"
            >${a.ci_name}</li>`);return i.find(".list-group").append(t),t}var n=!1,d=l.find("#dlg_list");c(o(d,{ci_idx:0,cg_name:"미분류"}),{ci_idx:0,ci_name:"미분류",cg_name:"미분류"},n=0==(s.ci_idx||0)&&0==(window.last_category||0)?!0:n),window.SBalance.request("/main/category/item/select").then(function(i){console.log("/main/category/item/select:",i);var t={},e=null;i.data.forEach(function(i){var a=t[i.cg_name];null==a&&(a=o(d,i),t[i.cg_name]=a),0==n&&i.ci_idx==s.ci_idx?(d.find(".list-group-item").removeClass("focus"),e=c(a,i,n=!0)):0==n&&i.ci_idx==window.last_category?(e=c(a,i,!1)).addClass("focus"):c(a,i,!1)}),null!=e&&e[0].scrollIntoView({block:"center"}),d.find(".list-group-item").click(function(){d.find(".list-group-item").removeClass("active"),d.find(".list-group-item").removeClass("focus"),$(this).addClass("active")}),d.find(".list-group-item").dblclick(function(){1==$(this).hasClass("active")&&l.find("#modal_ok").click()}),l.$body.css("disply","block")}),l.find("#modal_ok").click(function(){var i=d.find(".list-group-item.active"),a=i.attr("ci_idx"),t=i.attr("ci_name"),e=i.attr("cg_name");console.log("ci_idx:",a,i),null!=a&&Number.isInteger(parseInt(a))?(window.last_category=a,l.close({ci_idx:a,ci_name:t,cg_name:e})):l.close(null)})}function onLoaded(i){console.log("onLoaded:",i)}function onClosed(i){console.log("onClosed:",i)}</script>