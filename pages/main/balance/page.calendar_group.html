<style>.scalendar{width:100%}.scalendar table{border-collapse:collapse;border:.5px solid #7a7d7c;width:100%}.scalendar table thead th{height:23px;color:#7a7d8c;text-align:right;border:.5px solid #7a7d7c}.scalendar td{height:81px;min-height:81px;padding:3px;vertical-align:top;border-collapse:collapse;border:.5px solid #7a7d7c;max-width:50px}.scalendar .sbc_td{width:100%;height:100%;display:flex;flex-direction:column}.scalendar .sbc_head{font-size:12px}.scalendar .sbc_head ._day{text-align:right}.scalendar .sbc_head .sbc_curr{color:#000}.scalendar .sbc_head .sbc_nurr{color:#7a7d7c}.scalendar .sbc_head ._day.sbc_curr.week_red{color:red}.scalendar .sbc_head ._day.sbc_curr.week_blue{color:#00f}.scalendar .sbc_head ._day.sbc_curr.week_norm{color:#babdbc}.scalendar .sbc_body{width:100%;height:100%;color:#babdbc}#unit,.scalendar .sbc_body #amt{font-size:12px}.scalendar .sbc_body .amount-deposit{justify-content:flex-end}</style><div page-declare=dpage class="w-100 h-100" onopen=onPageOpen(this)><div class="w-100 scalendar"><table cellspacing=0 cellpadding=0><col width=13%><col width=13%><col width=13%><col width=13%><col width=13%><col width=13%><col width=13%><thead><tr><th scope=col><span>일</span><th scope=col><span>월</span><th scope=col><span>화</span><th scope=col><span>수</span><th scope=col><span>목</span><th scope=col><span>금</span><th scope=col><span>토</span><tbody class=_calendarTableBody></table></div></div><script>function getAmountUnit(t){for(var e=0,a=["","k","m","g","t","p"];;){if(!(3<Math.floor(t/1e3).toString().length))return obj_amount={amt:thousandFormatter(t),unit:a[e],cnt:e};t=Math.floor(t/1e3),e++}}function inquire_calendar(l,u,c){return console.log("inbound:",u),window.SBalance.request("/main/message/calendar",u).then(function(t){console.log("inquire_calendar:",t);var e,a={sum_count:0,sum_withdraw:amountAdd(),sum_deposit:amountAdd()},n=(l.find("._calendarTableBody").empty(),new Date(u.year,u.month-1,1)),d=new Date(n),s=(d.setDate(d.getDate()-n.getDay()),{item:null,pos:0,date:null});for(wpos=0;wpos<5;wpos++){for(e=$("<tr>"),dpos=0;dpos<7;dpos++){var o=$(`
        <td><div  class="sbc_td">
            <div class="sbc_head"> <div class="_day">4</div> </div>
            <div class="sbc_body"> </div>
        </div></td>
        `),r=(s.item=null,s.pos<t.data.length&&(s.date=formaterNewDate_fromFmtDate(t.data[s.pos].sms_date)),null!=s.date&&d.getMonth()==s.date.getMonth()&&d.getDate()==s.date.getDate()&&(s.item=t.data[s.pos],s.pos++,amountAdd(a.sum_withdraw,s.item.withdraw_amount),amountAdd(a.sum_deposit,s.item.deposit_amount),a.sum_count++),o.find(".sbc_head")),i=(r.attr("cdate",formaterFmtDate_fromDate(d)),r.find("._day"));switch(i.html(d.getDate()),d.getMonth()==n.getMonth()?i.addClass("sbc_curr"):i.addClass("sbc_nurr"),d.getDay()){case 0:i.addClass("week_red");break;case 6:i.addClass("week_blue");break;default:i.addClass("week_norm")}var r=o.find(".sbc_body"),m="-",m=(s.item&&0<s.item.withdraw_count&&(m=thousandFormatter(s.item.withdraw_amount)),r.append('<div class="d-flex justify-content-end amount-withdraw">'+`<div class="text-truncate" id="amt">${m}</div>`+"</div>"),"-");s.item&&0<s.item.deposit_count&&(m=thousandFormatter(s.item.deposit_amount)),r.append('<div class="d-flex justify-content-end amount-deposit">'+`<div class="text-truncate" id="amt">${m}</div>`+"</div>"),null!=s.item&&o.click(function(){var t=$(this).find(".sbc_head").attr("cdate"),t={day:formaterNewDate_fromFmtDate(t).getDate()};return l.getFrame().openPage("https://lclasser.github.io/sbalance/pages/main/balance/page.calendar_item.html",t.day+" 일",t),!1}),d.setDate(d.getDate()+1),e.append(o)}l.find("._calendarTableBody").append(e)}c(a)})}function onPageOpen(t){var a=t.getPage(),n=a.getReference("balances");function d(){var e=a.getFrame().getBalanceSum(),t={year:n.now_date.getFullYear(),month:n.now_date.getMonth()+1,sms_class:e&&e[0].getSummaryClass()},t=Object.assign(t,n.filter);inquire_calendar(a,t,function(t){e&&e[0].setSummaryResult(t,d)})}a.on("refresh",function(t,e){return STracer("page.calendar.html").log("event.refresh:",t,e),d(),!0}),d()}</script>