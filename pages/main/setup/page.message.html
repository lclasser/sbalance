<div page-declare=dpage class=sb-page onload=onPageLoad(this)><ul class="sb-list sb-menu"><li class="form-check form-switch list-row" onclick=""><label class=list-item for=enable_sms><div class=menu-text>SMS문자 수신 설정</div><div class=memo-text>SMS문자 수신시 저장 여부</div></label><div class="form-check form-switch align-items-center d-flex h-100 list-arrow p-0" style=width:70px><input class="p-0 form-check-input h-50 m-0 sb-switch w-100" type=checkbox id=enable_sms></div><li class=list-line><li class="form-check form-switch list-row" onclick=""><label class=list-item for=enable_gps><div class=menu-text>위치 저장 설정</div><div class=memo-text>SMS문자 수신시 위치 저장 여부</div></label><div class="form-check form-switch align-items-center d-flex h-100 list-arrow p-0" style=width:70px><input class="p-0 form-check-input h-50 m-0 sb-switch w-100" type=checkbox id=enable_gps></div><li class=list-line><li class=list-row id=msg_read><div class=list-item><div class=menu-text>SMS 문자 읽기</div><div class=memo-text>장치에 저장된 SMS문자 불러오기 (미수신 문자 읽기)</div></div><li class=list-line><li class=list-row id=msg_down><div class=list-item><div class="menu-text read-text">Excel 받기</div><div class=memo-text>저장된 내역을 Exceel로 다운로드</div></div></ul></div><script>function onPageLoad(e){var i=e.getPage();stracer("page.message.html").log("page.message.html"),e=window.SBalance.isEnableSMS(),console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>:",e),null==e&&($("#enable_sms").attr("disabled","disabled"),e=!1,stracer("page.message.html").log("disabled")),$("#enable_sms").attr("checked",e),$("#enable_sms").click(function(){var a=$(this).prop("checked");window.SBalance.request("/main/user/update",{enable_sms:1==a?"Y":"N"}).then(function(e){stracer("page.message_list.html").log("/api/message/insert res:",e),window.SBalance.setEnableSMS(a)}),a?$("#enable_gps").attr("disabled",null):$("#enable_gps").attr("disabled","disabled")}),null==(e=window.SBalance.isEnableGPS())&&($("#enable_gps").attr("disabled","disabled"),e=!1,stracer("page.message.html").log("disabled")),$("#enable_gps").attr("checked",e),$("#enable_gps").click(function(){var a=$(this).prop("checked");window.SBalance.request("/main/user/update",{enable_gps:1==a?"Y":"N"}).then(function(e){stracer("page.message_list.html").log("/api/message/insert res:",e),window.SBalance.setEnableGPS(a)})}),i.find("#msg_read").click(function(){if("web1"==window.SBalance.getMode()){for(var e=new Date,a=""+e.getFullYear()+("0"+(e.getMonth()+1).toString()).slice(-2),s=""+("0"+(e.getMonth()+1).toString()).slice(-2),t=[],n=0;n<1;n++)t.push({usr_key:window.SBalance.getSignin().usr_key,dev_key:"a024124e-e94c-3996-b21d-2b3b989661bf",msg_phone:"15447200",msg_date:a+"16",msg_time:"0152"+("00"+n).slice(-2),msg_body:`[Web발신]
신한카드(6441)승인 최*호 30,000원(일시불)${s}/16 01:52 고양휴게소(  누적7,110,3${("00"+n).slice(-2)}원  
`,msg_event:"onRead"}),t.push({usr_key:window.SBalance.getSignin().usr_key,dev_key:"a024124e-e94c-3996-b21d-2b3b989661bf",msg_phone:"15447200",msg_date:a+"12",msg_time:"0152"+("00"+n).slice(-2),msg_body:`[Web발신]
신한카드(1580)승인 최*호       27,490원(일시불)${s}/12 21:44  쿠팡          누적6,905,354원  
`,msg_event:"onRead"}),t.push({usr_key:window.SBalance.getSignin().usr_key,dev_key:"a024124e-e94c-3996-b21d-2b3b989661bf",msg_phone:"15447200",msg_date:a+"14",msg_time:"0152"+("00"+n).slice(-2),msg_body:`[Web발신]
[신한체크승인]     최*호(8273) ${s}/14                 15:07  (금액)5,700원 티머니 법인택시  
`,msg_event:"onRead"});for(var l=["[Web발신] 신한카드(0380)승인 최*호 7,100원(일시불)06/27 18:06 씨유문래벤처 누적3,686,870원","[Web발신] [신한카드]         자동납부       정상승인 최정호님    $MONTH/10 (일시불)       7,750원 서울도시가스(주)","[web발신] 신한카드(6441)승인 최*호님       (주)에스케이브  81,180원 정상 승인","[Web발신] 신한카드(0380)승인 최*호님       SK텔레콤        78,100원 정상 승인","[Web발신] 신한카드(0380)승인 최*호님       아파트 관리비  173,720원 정상승인 되었습니다.","[Web발신] [신한체크승인]     최*호(8273)    $MONTH/14 15:07    (금액)5,700원 티머니 법인택시","[Web발신] 신한카드(6441)승인 최*호         10,400원(일시불)$MONTH/19 03:22 gs25운정비발 누적4,051,421원"],g=0;g<l.length;g++)l[g]=l[g].replace("$MONTH",s),t.push({usr_key:window.SBalance.getSignin().usr_key,dev_key:"a024124e-e94c-3996-b21d-2b3b989661bf",msg_phone:"15447200",msg_date:a+"14",msg_time:"0152"+("00"+n).slice(-2),msg_body:l[g],msg_event:"onRead"});t.push({usr_key:window.SBalance.getSignin().usr_key,dev_key:"a024124e-e94c-3996-b21d-2b3b989661bf",msg_phone:"15447200",msg_date:"20230627",msg_time:"0152"+("00"+n).slice(-2),msg_body:l[0],msg_event:"onRead"});e={date1:a.slice(0,4)+"01",date2:a.slice(0,4)+"31",lists:t};i.getFrame().openPage("https://lclasser.github.io/sbalance/pages/main/setup/page.message_list.html","문자 읽기",e)}else window.openModal("https://lclasser.github.io/sbalance/pages/main/modal/modal.date_range.html",null,function(e){var a,s;null!=e&&(stracer("page.message.html").log("date range:",e),a={date1:formaterFmtDate_fromDate(e.date1),date2:formaterFmtDate_fromDate(e.date2)},s=[],window.SBalance.readMessage(a,function(e){s.push(e)},function(e){null==e?window.toast({title_class:"bg-danger text-white",title_text:"문자 읽기",mesg_text:"데이터가 없습니다."}):(stracer("page.message.html").log("onFinish:["+e+"] "+s.length),a.lists=s,i.getFrame().openPage("https://lclasser.github.io/sbalance/pages/main/setup/page.message_list.html","문자 읽기",a))}))})})}</script>