<div page-declare=dpage class=sb-page onload=onPageLoad(this)><div id=list_items class=overflow-auto style=margin-bottom:40px></div></div><script>function onPageLoad(a){inquire_match(a.getPage())}function inquire_match(l){window.SBalance.request("/main/match/lists").then(function(a){console.log("match/list:",a);var i=l.find("#list_items"),t=(i.empty(),{});a.data.forEach(function(a){t[a.mat_category]=t[a.mat_category]||[],t[a.mat_category].push(a)});console.log("cates:",t),Object.values(t).forEach(function(a,t){var s,c,e;a.length<=0||(t="wgroup_"+t,(c=(s=$(`
    <div class="sb-card card">
        <div class="card-header">
            <div class="d-flex flex-grow-1 align-items-center">
                <img id="cate_icon" class="p-1 pe-2" src="https://lclasser.github.io/sbalance/public/image/icon_category.svg">
                <span id="cate_name" class="">분류<span>
            </div>
            <button type="button" class="transparent-bgcolor" 
                id="item_collapse"
                data-bs-toggle="collapse" data-bs-target=".group_x" 
                aria-expanded="false" aria-controls=".group_x">
                <div class="collapse hide group_x"><img style="height:24px;" src="https://lclasser.github.io/sbalance/public/image/card_down.svg"></div>
                <div class="collapse show group_x"><img style="height:24px;" src="https://lclasser.github.io/sbalance/public/image/card_up.svg"></div>
            </button>
        </div>
        <div class="card-body p-1 collapse show group_x">
        </div>
    </div>`)).find("#item_collapse")).attr("data-bs-target","."+t),c.attr("aria-controls","."+t),s.find(".group_x").removeClass("group_x").addClass(t),null==a[0].cg_name||null==a[0].ci_name?s.find("#cate_name").html("(없음)"):s.find("#cate_name").html(a[0].cg_name+"/"+a[0].ci_name),e=s.find(".card-body"),a.forEach(function(t,a){var s=$(`
    <div class="row align-items-center m-0" style="min-height:42px;"">
        <div class="d-flex col" id="mat_order">순서</div>
        <div class="d-flex col" id="mat_class">출금</div>
        <div class="d-flex col" id="mat_amount">금액</div>
        <div class="d-flex col-5"><span class="text-truncate" id="mat_contents">설정</span></div>
    </div>
        `);switch(s.find("#mat_order").html(t.mat_order),t.mat_class){case"W":s.find("#mat_class").html("출금");break;case"D":s.find("#mat_class").html("입금")}s.find("#mat_amount").html(thousandFormatter(t.mat_amount||"")),s.find("#mat_contents").html(`"${t.mat_contents}"`),s.click(function(){var a={acc_type:t.acc_type,acc_name:t.acc_name,acc_key:t.acc_key,sms_class:t.mat_class,sms_category:t.ci_idx,mat_amount:t.mat_amount,mat_contents:t.mat_contents,mat_order:t.mat_order};window.openModal("https://lclasser.github.io/sbalance/pages/main/modal/modal.setup_match.html",a,function(a){inquire_match(l)})}),0<a&&e.append($('<div class="seperater m-0 w-100"/>')),e.append(s)}),i.append(s))})})}</script>