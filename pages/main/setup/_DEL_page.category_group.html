<style>.fa-circle-plus{font-size:calc(1.625rem + 4.5vw)!important}</style><page onload=onPageLoad(this)><div class=mb-2 id=list_items></div><div class="bottom-0 end-0 float-end m-1 nav-link p-1" id=group_add><i class="fa-circle-plus fa-solid"></i></div></page><script>function onPageLoad(t){var c=frameGetPage(t);console.log("X category_group.html onPageLoad...",c);const s=`
    <div class="card-header d-flex align-items-center p-1" style="height:35px;">
        <div class="me-auto" id="item_title"></div>
        <div class="ms-1 ps-4">
            <button class="btn btn-success btn-sm me-1" type="button" id="btn_insert">추가</button>
            <button class="btn btn-warning btn-sm me-1" type="button" id="btn_modify">수정</button>
            <button class="btn btn-danger btn-sm me-1" type="button" id="btn_delete">삭제</button>
            <button class="btn btn-secondary btn-sm" type="button" 
                data-bs-toggle="collapse" data-bs-target=".group_x" aria-expanded="false" aria-controls=".group_x">
                <div class="collapse hide group_x"> <i class="fa-solid fa-caret-down"></i> </div>
                <div class="collapse show group_x"> <i class="fa-solid fa-caret-up"></i> </div>
            </button>
        </div>
    </div>
    <ul class="list-group list-group-flush collapse show group_x">
    </ul>`;const r=`
        <li class="list-group-item d-flex p-2">
            <div class="d-flex align-items-center col-3" id="cate_name"></div>
            <div class="d-flex align-items-center col-3 text-secondary" id="cate_type"></div>
            <button class="btn btn-warning btn-sm text-nowrap ms-auto me-1" type="button" id="btn_modify">수정</button>
        </li>
    `;function d(){c.findItem("#list_items").children().remove(),$.post("/main/category/item/select",null,function(t){console.log("/main/category/item/select:",t);var i=null;t.data.forEach(function(t){var e,a,o,n,l;null==t.cate_item||t.cate_item.length<=0?(a=t,o=c.findItem("#list_items"),n="group_"+a.cate_idx,(l=$("<div/>").addClass("card w-100 mb-1").html(s)).find("#item_title").html(a.cate_group),l.find(".group_x").removeClass("group_x").addClass(n),l.find('[data-bs-target=".group_x"]').attr("data-bs-target","."+n),l.find('[aria-controls=".group_x"]').attr("aria-controls",n),l.find("#btn_modify").click(function(){c.getFrame().openPage("https://lclasser.github.io/sbalance/pages/main/setup/page.category_list.html","분류 항목",a)}),l.find("#btn_insert").click(function(){var t={title:`'${a.cate_group}'의 분류 추가`,btn_confirm:"추가",cate_group:a.cate_group};c.openModal("https://lclasser.github.io/sbalance/pages/main/modal/modal.info_citem.html",t,function(t){null!=t&&d()})}),l.find("#btn_delete").click(function(){c.openModal("https://lclasser.github.io/sbalance/pages/main/modal/modal.confirm.html",{title:"삭제 확인",content:`"${a.cate_group}" 그룹을 삭제 하시겠습니까?`,btn_confirm:"삭제",btn_cancel:"취소"},function(t){1==t&&$.post("/main/category/group/delete",a,function(t){console.log("/main/category/group/delete res:",t),"Y"==t.error.success&&d()})})}),o.append(l),i=l):(n=i,e=t,(o=$(r)).find("#cate_name").html(e.cate_item),o.find("#cate_type").html(getStringByCateType(e.cate_type)),o.find("#btn_modify").click(function(){var t={cate_idx:e.cate_idx,cate_group:e.cate_group,cate_item:e.cate_item,cate_type:e.cate_type,title:"분류 수정",btn_confirm:"수정"},a=(console.log("modify:",t),function(t,e){null!=t&&1==t.btn_delete&&c.openModal("https://lclasser.github.io/sbalance/pages/main/modal/modal.confirm.html",{title:"삭제 확인",content:`"${e.cate_item}" 분류를 삭제 하시겠습니까?`,btn_confirm:"삭제",btn_cancel:"취소"},function(t){1==t?(t={cate_idx:e.cate_idx},$.post("/main/category/item/delete",t,function(t){console.log("/main/category/item/update res:",t),"Y"==t.error.success&&d()})):c.openModal("https://lclasser.github.io/sbalance/pages/main/modal/modal.info_citem.html",e,a)})});c.openModal("https://lclasser.github.io/sbalance/pages/main/modal/modal.info_citem.html",t,a)}),n.find(".list-group").append(o))})})}$("#group_add").click(function(){console.log("group_add: click"),c.openModal("https://lclasser.github.io/sbalance/pages/main/modal/modal.info_cgroup.html",null,function(t){console.log("modal.info_cgroup.html result:",t),null!=t&&0<t.length&&$.post("/main/category/group/insert",{cate_group:t},function(t){null!=t.error&&"Y"!=t.error.success?alert(`그룹 추가를 실패 했습니다.(${t.error})`):d()})})}),d()}console.log("2 category_group.html in script..."),$(function(){console.log("9 onPageLoad...")})</script>