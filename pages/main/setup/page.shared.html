<div page-declare=dpage class="h-100 w-100" onload=onPageLoad(this) onclose=onPageClose(this)><div id=list_items class=overflow-hidden></div></div><script>function inquire_shared(i){window.SBalance.request("/main/shared/users").then(function(a){i.find("#list_items").empty(),console.log("users:",a);Object.values(a.data).forEach(function(a,e){var e="user_"+e,s=$("<div/>"),t=(s.addClass("sb-card card").html(`
        <div class="card-header">
            <div class="flex-grow-1" id="grp_name">지갑</div>
            <div class="col-auto p-1" style="text-align: right;">
                <button class="btn btn-success btn-sm me-1" type="button" id="btn_release">해제</button>
            </div>
            <button type="button" class="transparent-bgcolor" 
                id="item_collapse"
                data-bs-toggle="collapse" data-bs-target=".group_x" 
                aria-expanded="false" aria-controls=".group_x">
                <div class="collapse hide group_x"><img style="height:24px;" src="https://lclasser.github.io/sbalance/public/image/card_down.svg"></div>
                <div class="collapse show group_x"><img style="height:24px;" src="https://lclasser.github.io/sbalance/public/image/card_up.svg"></div>
            </button>
        </div>
        <div class="card-body p-0 collapse show group_x">
        </div>`),s.find("#grp_name").html(`${a[0].usr_name} (${a[0].usr_email})`),s.attr("share_key",a[0].share_key),s.find("#item_collapse")),c=(t.attr("data-bs-target","."+e),t.attr("aria-controls","."+e),s.find(".group_x").removeClass("group_x").addClass(e),s.find(".card-body"));a.forEach(function(a,e){var s=$("<div/>");switch(s.addClass("row m-0").css("min-height","54px").css("padding-right","6px").html(`
        <div class="d-flex align-items-center ps-1 pe-1 col-auto" id="acc_company" style="width: 70px;">금융사</div>
        <div class="d-flex align-items-center ps-1 pe-1 col" id="acc_alias">별칭</div>
        <div class="d-flex align-items-center ps-1 pe-1 col-1 justify-content-end" id="link_cnt"></div>
        `),s.attr("type",a.type),a.type){case"A":s.find("#acc_company").html(a.acc_company),s.find("#acc_alias").html(a.acc_alias),s.attr("acc_key",a.acc_key);break;case"C":s.find("#acc_company").html("카테고리"),s.find("#acc_alias").html(a.cg_name),s.attr("cg_key",a.cg_key)}c.append(s)}),i.find("#list_items").append(s)})})}function onPageLoad(a){a=a.getPage();STracer("page.wallet.html").dbg("onPageLoad..."),inquire_shared(a)}function onPageClose(a){STracer("page.wallet.html").dbg("onPageClose:",a)}</script>