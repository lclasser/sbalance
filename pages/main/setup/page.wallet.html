<div page-declare=dpage class=sb-page onload=onPageLoad(this) onclose=onPageClose(this)><div id=list_items class=overflow-auto style=margin-bottom:40px></div></div><script>function inquire_wallet(s){var i={self:{title:"본인",icon:"https://lclasser.github.io/sbalance/public/image/icon_user.svg",class:"self-text",wallets:{}},link:{title:"공유",icon:"https://lclasser.github.io/sbalance/public/image/icon_share.svg",class:"share-text",wallets:{}}};window.SBalance.request("/main/account/list").then(function(a){stracer("page.wallet.html").log("res:",a),a.data.forEach(function(a,e){var t=null;switch(a.acc_type){case"A":case"S":t=i.self;break;case"L":t=i.link;break;default:return}t.wallets[a.acc_key]=a})}).then(function(){s.find("#list_items").empty();Object.keys(i).forEach(function(a,e){var t,l,c=i[a];Object.values(c.wallets).length<=0||(a="wgroup_"+e,(e=$(`
    <div class="sb-card card">
        <div class="card-header">
            <div class="d-flex flex-grow-1 align-items-center">
                <img id="grp_icon" class="p-1 pe-2" src="">
                <span id="grp_name" class="">지갑<span>
            </div>
            <button type="button" class="transparent-bgcolor" 
                id="item_collapse"
                data-bs-toggle="collapse" data-bs-target=".group_x" 
                aria-expanded="false" aria-controls=".group_x">
                <div class="collapse hide group_x"><img style="height:24px;" src="https://lclasser.github.io/sbalance/public/image/card_down.svg"></div>
                <div class="collapse show group_x"><img style="height:24px;" src="https://lclasser.github.io/sbalance/public/image/card_up.svg"></div>
            </button>
        </div>
        <div class="card-body p-1 collapse show group_x">
        </div>
    </div>`)).find("#grp_icon").prop("src",c.icon||""),e.find("#grp_name").html(""+(c.title||"-")),(t=e.find("#item_collapse")).attr("data-bs-target","."+a),t.attr("aria-controls","."+a),e.find(".group_x").removeClass("group_x").addClass(a),l=e.find(".card-body"),Object.values(c.wallets).forEach(function(a,e){var t=$(`
    <div class="row m-0" style="min-height:54px; padding-right:6px">
        <div class="col-auto d-flex align-items-center" id="acc_company" style="width:80px;">금융사</div>
        <div class="col d-flex flex-column justify-content-center">
            <div class="row text-truncate" id="acc_alias">별칭</div>
            <div class="row text-truncate memo-text" id="item_memo"></div>
        </div>
        <div class="col-2 d-flex align-items-center justify-content-center" id="acc_display"></div>
        <div class="col-1 d-flex align-items-center justify-content-end memo-text" id="link_cnt">개수</div>
    </div>`);switch(t.find("#acc_company").html(a.acc_company),t.find("#acc_company").addClass(c.class),a.acc_alias=a.acc_alias||a.wlt_alias,a.acc_alias==a.wlt_alias?t.find("#acc_alias").html(""+a.acc_alias):t.find("#acc_alias").html(`${a.acc_alias}<span class="memo-text p-0">(${a.wlt_alias})</span>`),a.acc_memo=a.acc_memo||"",a.acc_type){case"A":case"S":a.acc_memo.length<=0?t.find("#item_memo").hide():t.find("#item_memo").html(a.acc_memo);break;case"L":t.find("#item_memo").html(a.acc_memo)}switch(t.find("#link_cnt").html(a.link_cnt||""),a.acc_display){case"I":t.find("#acc_display").hide();break;case"H":t.find("#acc_display").html("숨김");break;case"E":t.find("#acc_display").html("제외")}t.click(function(){window.openModal("https://lclasser.github.io/sbalance/pages/main/modal/modal.setup_wallet.html",a,function(a,e){null!=e&&inquire_wallet(s)})}),0<e&&l.append($('<div class="seperater m-0 w-100"/>')),l.append(t)}),s.find("#list_items").append(e))})})}function onPageLoad(a){stracer("page.wallet.html").dbg("onPageLoad...");var e=a.getPage();e.getFrame().setMenuCenter("menu_center_apps.svg",function(){stracer("page.wallet.html").log("onsetMenuCenter"),window.popver("https://lclasser.github.io/sbalance/pages/main/popver/menu.setup.wallet.html",{callback:function(){inquire_wallet(e)}})}),inquire_wallet(e)}function onPageClose(a){stracer("page.wallet.html").dbg("onPageClose:",a)}</script>