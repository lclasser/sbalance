<div page-declare=dpage class="h-100 w-100" onload=onPageLoad(this) onclose=onPageClose(this)><div id=list_items class=overflow-hidden></div></div><script>function inquire_wallet(i){var n={self:{title:"본인",wallets:{}},link:{title:"공유",wallets:{}}};window.SBalance.request("/main/account/list").then(function(a){a.data.forEach(function(a,e){var l=null,t=null;switch(a.acc_type){case"A":case"S":l=n.self,t=a.acc_key;break;case"L":l=n.link,t=a.acc_name;break;default:return}l.wallets[t]=a})}).then(function(){i.find("#list_items").empty();Object.keys(n).forEach(function(a,e){var l,t,s,a=n[a];Object.values(a.wallets).length<=0||(e="wgroup_"+e,(l=$("<div/>")).addClass("sb-card card").html(`
        <div class="card-header">
            <div class="flex-grow-1" id="grp_name">지갑</div>
            <button type="button" class="transparent-bgcolor" 
                id="item_collapse"
                data-bs-toggle="collapse" data-bs-target=".group_x" 
                aria-expanded="false" aria-controls=".group_x">
                <div class="collapse hide group_x"><img style="height:24px;" src="https://lclasser.github.io/sbalance/public/image/card_down.svg"></div>
                <div class="collapse show group_x"><img style="height:24px;" src="https://lclasser.github.io/sbalance/public/image/card_up.svg"></div>
            </button>
        </div>
        <div class="card-body p-0 collapse show group_x">
        </div>`),l.find("#grp_name").html(""+(a.title||"-")),(t=l.find("#item_collapse")).attr("data-bs-target","."+e),t.attr("aria-controls","."+e),l.find(".group_x").removeClass("group_x").addClass(e),s=l.find(".card-body"),Object.values(a.wallets).forEach(function(a,e){var l=$("<div/>");l.addClass("row m-0").css("min-height","54px").css("padding-right","6px").html(`
        <div class="d-flex align-items-center ps-1 pe-1 col-auto" id="acc_company" style="width: 70px;">금융사</div>
        <div class="d-flex align-items-center ps-1 pe-1 col" id="acc_alias">별칭</div>
        <div class="d-flex align-items-center ps-1 pe-1 col-1 justify-content-end" id="link_cnt">개수</div>`),l.find("#acc_company").html(a.acc_company),l.find("#acc_alias").html(a.acc_alias),l.find("#link_cnt").html(a.link_cnt),l.click(function(){window.openModal("https://lclasser.github.io/sbalance/pages/main/modal/modal.setup_wallet.html",a,function(a){null!=a&&inquire_wallet(i)})}),0<e&&s.append($('<div class="seperater m-0 w-100"/>')),s.append(l)}),i.find("#list_items").append(l))})})}function onPageLoad(a){STracer("page.wallet.html").dbg("onPageLoad...");var e=a.getPage();e.getFrame().setMenuCenter("menu_center_apps.svg",function(){console.log("onsetMenuCenter"),window.popver("https://lclasser.github.io/sbalance/pages/main/popver/menu.setup.wallet.html",{callback:function(){inquire_wallet(e)}})}),inquire_wallet(e)}function onPageClose(a){STracer("page.wallet.html").dbg("onPageClose:",a)}</script>