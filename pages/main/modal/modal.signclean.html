<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable sb-modal" role=document><div class=modal-content><div class=modal-header><h5 class=modal-title id=modal_title>정보 초기화</h5><button class=btn-close type=button data-bs-dismiss=modal aria-label=Close></button></div><div class="modal-body sb-form"><div class=sb-row><p style=font-size:18px id=dlg_usr_name><p>SBalance 서버에 저장된 회원님의 모든 문자(SMS) 정보를 초기화 합니다. (분류,지갑 정보는 삭제 되지 않습니다.)<p>정보 초기화 하기 위해 아래의 항목을 입력하세요!</div><div class=sb-row><div class=sb-col><span class="sb-label w-4">이름</span> <span class=sb-input id=dlg_name></span></div></div><div class=sb-row><div class=sb-col><span class="sb-label w-4">e-mail</span> <span class=sb-input id=dlg_email></span></div></div><div class=sb-row><div class=sb-col><span class="sb-label w-4">비밀번호</span> <input class=sb-input type=password id=dlg_pwd autocomplete=off placeholder=" " required></div></div><div class=sb-row><div class="d-flex flex-wrap" style=margin-top:24px><label class=sb-check><input type=checkbox id=dlg_agree required> <span class="caption ps-2">회원 문자(SMS) 정보는 초기화 완료시 즉시 완전 삭제 됩니다. 삭제된 데이터는 복구 할 수 없으니 주의하여 진행 하세요.</span></label></div></div></div><div class=modal-footer><button type=button class="btn btn-lg sb-normal" id=modal_ok>정보 초기화</button> <button type=button class="btn btn-lg sb-cancel" data-bs-dismiss=modal>취소</button></div></div></div><script>$(function(){var n=window.dmodal.getModal();stracer("signclean").log("signclean..."),window.SBalance.request("/main/user/select").then(function(e){if(null!=e.error&&"Y"!=e.error.success)throw new Error(`사용자 정보를 확인할 수 없습니다.(${e.error})`);e=e.data[0];n.find("#dlg_name").html(e.usr_name||""),n.find("#dlg_email").html(e.usr_email)}),n.find("#modal_ok").click(function(){var t;stracer("signclean").dbg("signclean: check."),null==n.find("#dlg_pwd").val()||n.find("#dlg_pwd").val().length<=0?(window.toast({title_class:"bg-secondary text-white",title_text:"정보 초기화",mesg_text:"비밀번호를 입력하세요."}),n.find("#dlg_pwd").focus()):1!=n.find("#dlg_agree").is(":checked")?(window.toast({title_class:"bg-secondary text-white",title_text:"정보 초기화",mesg_text:"탈퇴 동의를 체크해 주세요."}),n.find("#dlg_agree").focus()):(n.find("input").attr("disabled","disabled"),n.find("button").attr("disabled","disabled"),t={usr_email:n.find("#dlg_email").html(),usr_name:n.find("#dlg_name").html(),usr_pwd:SHA_256(n.find("#dlg_pwd").val()),auth_type:"signclean"},window.SBalance.request("/main/user/confirm",t).then(function(e){if(null==(e&&e.data&&e.data[0]))throw new Error("회원정보를 찾을수 없습니다.");stracer("signclean").dbg("signclean: request."),window.SBalance.request("/sign/authority",t).then(function(e){window.toast({title_class:"bg-secondary text-white",title_text:"인증 요청",mesg_text:"정보 초기화 확인을 위한 인증을 요청했습니다. (email을 확인하세요.)"}),window.openModal("https://lclasser.github.io/sbalance/pages/modal/modal.verify.signclean.html",t,function(e,t){switch(e){case"close":case"exit":window.location="/"}})}),stracer("signclean").dbg("signclean: return.")}).finally(function(){n.find("input").removeAttr("disabled"),n.find("button").removeAttr("disabled")}))})})</script>