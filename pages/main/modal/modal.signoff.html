<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable sb-modal" role=document><div class=modal-content><div class=modal-header><h5 class=modal-title id=modal_title>회원 탈퇴</h5><button class=btn-close type=button data-bs-dismiss=modal aria-label=Close></button></div><div class="modal-body sb-form"><div class=sb-row><p style=font-size:18px id=dlg_usr_name><p>Sbalance 서비스를 탈퇴 하시겠습니까?<p>탈퇴 시, 계정과 공유된 정보들은 영구 삭제되며 복구할 수 없습니다. 신중히 고려하시고 탈퇴를 진행하세요.</div><div class=sb-row><div class=sb-col><span class="sb-label w-4">이름</span> <span class=sb-input id=dlg_name></span></div></div><div class=sb-row><div class=sb-col><span class="sb-label w-4">e-mail</span> <span class=sb-input id=dlg_email></span></div></div><div class=sb-row><div class=sb-col><span class="sb-label w-4">비밀번호</span> <input class=sb-input type=password id=dlg_pwd autocomplete=off placeholder=" " required></div></div><div class=sb-row><div class="d-flex flex-wrap" style=margin-top:24px><label class=sb-check><input type=checkbox id=dlg_agree required> <span class="caption ps-2">회원 탈퇴 요청 후, 최대 7일 이내에 회원은 모든 데이터는 삭제 됩니다.</span></label></div></div></div><div class=modal-footer><button type=button class="btn btn-lg sb-normal" id=modal_ok>회원 탈퇴</button> <button type=button class="btn btn-lg sb-cancel" data-bs-dismiss=modal>취소</button></div></div></div><script>$(function(){var n=window.dmodal.getModal();stracer("signoff").log("signoff..."),window.SBalance.request("/main/user/select").then(function(t){if(null!=t.error&&"Y"!=t.error.success)throw new Error(`사용자 정보를 확인할 수 없습니다.(${t.error})`);t=t.data[0];n.find("#dlg_name").html(t.usr_name||""),n.find("#dlg_email").html(t.usr_email)}),n.find("#modal_ok").click(function(){var e;stracer("signoff").dbg("signoff: check."),null==n.find("#dlg_pwd").val()||n.find("#dlg_pwd").val().length<=0?(window.toast({title_class:"bg-secondary text-white",title_text:"회원 탈퇴",mesg_text:"비밀번호를 입력하세요."}),n.find("#dlg_pwd").focus()):1!=n.find("#dlg_agree").is(":checked")?(window.toast({title_class:"bg-secondary text-white",title_text:"회원 탈퇴",mesg_text:"탈퇴 동의를 체크해 주세요."}),n.find("#dlg_agree").focus()):(n.find("input").attr("disabled","disabled"),n.find("button").attr("disabled","disabled"),e={usr_email:n.find("#dlg_email").html(),usr_name:n.find("#dlg_name").html(),usr_pwd:SHA_256(n.find("#dlg_pwd").val()),auth_type:"signoff"},window.SBalance.request("/main/user/confirm",e).then(function(t){if(null==(t&&t.data&&t.data[0]))throw new Error("회원정보를 찾을수 없습니다.");stracer("signoff").dbg("signoff: request."),window.SBalance.request("/sign/authority",e).then(function(t){window.toast({title_class:"bg-secondary text-white",title_text:"인증 요청",mesg_text:"탈퇴 확인을 위한 인증을 요청했습니다. (email을 확인하세요.)"}),window.openModal("https://lclasser.github.io/sbalance/pages/modal/modal.verify.signoff.html",e,function(t,e){switch(t){case"close":case"exit":window.location="/"}})}),stracer("signoff").dbg("signoff: return.")}).finally(function(){n.find("input").removeAttr("disabled"),n.find("button").removeAttr("disabled")}))})})</script>