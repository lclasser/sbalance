<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role=document><div class=modal-content><div class=modal-header><h5 class=modal-title id=modal_title>분류 설정</h5><button class=btn-close type=button data-bs-dismiss=modal aria-label=Close></button></div><div class=modal-body><div id=dlg_list></div></div><div class=modal-footer><button type=button id=modal_ok class="btn btn-lg btn-primary">설정</button> <button type=button class="btn btn-lg btn-secondary" data-bs-dismiss=modal>취소</button></div></div></div><script>$(function(){var c=window.dmodal.getParam();console.log("param:",c);var r=$("#dlg_list");$.post("/main/category/item/select",null,function(a){console.log("/main/category/item/select:",a);var o={};a.data.forEach(function(a){var i,t,s,l,e=o[a.cg_name];null==e&&(l=r,s="group_"+(t=a).ci_idx,(i=$("<div/>").addClass("card border-0 w-100 mb-1").html(`
    <div class="sb-card-header card-header d-flex align-items-center p-1" style="height:35px;">
        <div class="me-auto text_string" id="item_title"></div>
        <div class="ms-1 ps-4">
            <button type="button" class="transparent-bgcolor" 
                id="item_collapse"
                data-bs-toggle="collapse" data-bs-target=".group_x" 
                aria-expanded="false" aria-controls=".group_x">
                <div class="collapse hide group_x"><img style="height:24px;" src="https://lclasser.github.io/sbalance/public/image/card_down.svg"></div>
                <div class="collapse show group_x"><img style="height:24px;" src="https://lclasser.github.io/sbalance/public/image/card_up.svg"></div>
            </button>
        </div>
    </div>
    <ul class="sb-card-body list-group list-group-flush collapse show group_x">
    </ul>`)).find("#item_title").html(t.cg_name),i.find(".group_x").removeClass("group_x").addClass(s),i.find('[data-bs-target=".group_x"]').attr("data-bs-target","."+s),i.find('[aria-controls=".group_x"]').attr("aria-controls",s),l.append(i),e=i,o[a.cg_name]=e),t=e,l=(s=a).ci_idx==c.sms_category,t.find(".list-group").append(`<li class="list-group-item list-group-item-action ${l?"active":""}" ci_idx="${s.ci_idx}" >${s.ci_name}</li}`)}),r.find(".list-group-item").click(function(){var a=$(this).hasClass("active");r.find(".list-group-item").removeClass("active"),0==a&&$(this).addClass("active")})}),$("#modal_ok").click(function(){var a=r.find(".list-group-item.active"),i=a.attr("ci_idx");console.log("sel_idx:",i,a),null!=i&&Number.isInteger(parseInt(i))?window.dmodal.close(i):window.dmodal.close(-1)})})</script>