<div page-declare=dpage class="page-column sb-page" onload=onPageLoad(this) onclose=onPageClose(this)><style>#page-balance .daily-button{color:inherit;font-weight:600!important;line-height:20px;letter-spacing:-.03em;padding:0 5px;font-size:var(--theme-font-size-2);border:0;width:86px}#page-balance #balance_sum{font-weight:200!important;font-size:var(--theme-font-size-1);line-height:24px}#page-balance #balance_sum #sum_withdraw{color:#fff;border-radius:4px;background-color:#3c97f5;padding:0 4px;width:108px;cursor:pointer;height:26px}#page-balance #balance_sum #sum_deposit{color:#fff;border-radius:4px;background-color:#f96c4e;padding:0 4px;width:108px;cursor:pointer;height:26px}#page-balance .spin-left-button{position:sticky;left:0;background-color:var(--theme-color-background);border:0}#page-balance .spin-right-button{position:sticky;right:0;background-color:var(--theme-color-background);border:0}#page-balance .balance-menu{min-width:86px;font-family:Noto Sans;font-weight:400!important;font-size:var(--theme-font-size-2);line-height:20px;opacity:1;text-align:center;color:#dad5d1;display:flex;align-items:center;justify-content:center;user-select:none}#page-balance .balance-menu.actived{background:linear-gradient(#ffc84c,#fc8032);color:#222223;border-radius:5px}#page-balance .balance-menu.disable{color:#575552;background:#343434}#page-balance .balance-menu:hover:not(.actived):not(.disable){color:#dad5d1;background:#343434}#page-balance .balance-control{display:flex;width:100%;margin:0;flex-wrap:wrap;min-height:30px}#page-balance .balance-control:not(:last-child){margin-bottom:2.5px}#page-balance .balance-control::-webkit-scrollbar{width:0!important;height:0!important}#page-balance .balance-control:last-child{border-bottom:1px solid #282829}#page-balance .balance-listmenu{overflow-x:auto;overflow-y:hidden}#page-balance{padding:2.5px 3.5px}</style><div class="w-100 column-fixed" id=page-balance><div class=balance-control><div class=d-flex><button type=button class="p-0 spin-left-button" id=btn_month_prev><img style=height:24px src=https://lclasser.github.io/sbalance/public/image/arrow_left.svg></button><div class=d-flex style=position:relative><input type=button class="daily-button date datetimepicker-input transparent-bgcolor" id=btn_month_date data-toggle=datetimepicker data-target=btn_month_date></div><button type=button class="p-0 spin-right-button" id=btn_month_next><img style=height:24px src=https://lclasser.github.io/sbalance/public/image/arrow_right.svg></button></div><img class=ms-auto src=https://lclasser.github.io/sbalance/public/image/filter_empty.svg id=balance_filter></div><div class="balance-control balance-listmenu flex-nowrap flex-row" style=""><button type=button class="p-0 spin-left-button" id=btn_menu_prev><img style=height:24px src=https://lclasser.github.io/sbalance/public/image/arrow_left.svg></button><div class=balance-menu page-link=https://lclasser.github.io/sbalance/pages/main/balance/page.daily.html>일별</div><div class=balance-menu page-link=https://lclasser.github.io/sbalance/pages/main/balance/page.calendar.html>달력</div><div class=balance-menu page-link=https://lclasser.github.io/sbalance/pages/main/balance/page.category.html>분류</div><div class=balance-menu page-link=https://lclasser.github.io/sbalance/pages/main/balance/page.wallet.html>지갑</div><div class="balance-menu disable">월별</div><div class="balance-menu disable">통계</div><div class=w-100></div><button type=button class="p-0 spin-right-button" id=btn_menu_next><img style=height:24px src=https://lclasser.github.io/sbalance/public/image/arrow_right.svg></button></div><div class=balance-control id=balance_sum><div class="d-flex align-items-center flex-grow-1 flex-shrink-1" style=flex-basis:30%;min-width:30%><img class=pe-1 src="" id=move_icon> <span class="border-bottom text-start text-truncate" id=move_path></span></div><div class="d-flex align-items-center justify-content-center ms-auto pe-1"><span class=text-end checked=checked id=sum_deposit></span> <span class=p-2></span> <span class=text-end checked=checked id=sum_withdraw></span></div></div></div><div class="column-paged h-100 p-1" id=balance_body></div></div><script>function onPageLoad(e){stracer("page.balance.html").log("onPageLoad:",e);var l=e.getPage(),a=l.getReference("balances",{now_date:new Date});function t(){null!=a.filter&&1!=Object.values(a.filter).some(function(e){if(null!=e&&0<e.length)return n.prop("src","https://lclasser.github.io/sbalance/public/image/filter_exist.svg"),!0})&&n.prop("src","https://lclasser.github.io/sbalance/public/image/filter_empty.svg")}null==a.now_date&&(a.now_date=new Date);var n=l.find("#balance_filter"),i=(null!=n&&(t(),n.click(function(){window.popver("https://lclasser.github.io/sbalance/pages/main/popver/filter.balance.html",a.filter,function(e){null!=e&&(stracer("page.balances").dbg("filter: result=",e),a.filter=e,t(),l.getFrame().send("refresh"))})})),l.find("#balance_sum"));function c(e){l.find("#btn_month_date").datetimepicker("date",a.now_date),1==e&&l.getFrame().send("refresh")}null!=i&&(i[0].isDeposit=function(){return"checked"==i.find("#sum_deposit").attr("checked")},i[0].isWithdraw=function(){return"checked"==i.find("#sum_withdraw").attr("checked")},i[0].getSummaryClass=function(){var e=[" "];return 1==i[0].isDeposit()&&e.push("D"),1==i[0].isWithdraw()&&e.push("W"),e},i[0].setSummaryResult=function(e,t){e=e||{},i.find("#sum_deposit").html(amountFormat(null,e.sum_deposit)),i.find("#sum_withdraw").html(amountFormat(null,e.sum_withdraw)),i.find("#sum_deposit").off(),i.find("#sum_withdraw").off(),i.find("#sum_deposit, #sum_withdraw").click(function(){$(this).attr("checked")?$(this).attr("checked",!1):$(this).attr("checked","checked"),t&&t()})}),l.find("#btn_month_date").datetimepicker({dayViewHeaderFormat:"YYYY-MM",format:"YYYY년 MM월",locale:"ko",date:new Date,icons:{today:"fa-solid fa-calendar-check"},buttons:{showToday:!0}}),l.find("#btn_month_date").on("change.datetimepicker",({date:e,oldDate:t})=>{stracer("page.balances").dbg(`date-picker: new-date=${e.toDate()}, old-date=`+t),e.toDate()!=t.toDate()&&(a.now_date=e.toDate(),c(!0))}),l.find("#btn_month_prev").click(function(){a.now_date.setMonth(a.now_date.getMonth()-1,1),c(!0)}),l.find("#btn_month_next").click(function(){a.now_date.setMonth(a.now_date.getMonth()+1),c(!0)}),c(!1),l.find(".balance-menu").click(function(e){var t,a,n,i;null!=$(this).attr("page-link")&&(l.find(".balance-menu").removeClass("actived"),$(this).addClass("actived"),t=$(this),a=t.parent(),n=t.width(),t={left:t.position().left,right:t.position().left+n},n={left:a.scrollLeft(),right:a.scrollLeft()+a.width(),width:a.width()},console.log("pos:",t,"scroll:",n),i=null,t.left<24.5?i=n.left+t.left-24.5:n.width<t.right&&(i=n.left+t.right-n.width+24.5),console.log("divpos:",i),null!=i)&&a.animate({scrollLeft:i},300)}),l.find("#btn_menu_prev").click(function(){var a=null;$(".balance-menu:not(.disable)").each(function(e,t){if(1==$(t).hasClass("actived"))return null!=a&&($(".balance-menu").removeClass("actived"),$(a).addClass("actived"),$(a).trigger("click")),!1;a=t})}),l.find("#btn_menu_next").click(function(){var a=null;$(".balance-menu:not(.disable)").each(function(e,t){if(null!=a)return $(".balance-menu").removeClass("actived"),$(t).addClass("actived"),$(t).trigger("click"),!1;1==$(t).hasClass("actived")&&(a=t)})});var s=l.createFrame("balance_body");s.getBalanceSum=function(){return l.find("#balance_sum")},s.setPagePath=function(e,t){var a,n="";for(1!=Array.isArray(e)&&(e=[e]),a=0;a<e.length;a++)0<a&&(n+="> "),n+=e[a];switch(e[0]){case"일별":$("#move_icon").attr("src","https://lclasser.github.io/sbalance/public/image/balance_daily.svg");break;case"달력":$("#move_icon").attr("src","https://lclasser.github.io/sbalance/public/image/balance_month.svg");break;case"분류":$("#move_icon").attr("src","https://lclasser.github.io/sbalance/public/image/balance_category.svg");break;case"지갑":$("#move_icon").attr("src","https://lclasser.github.io/sbalance/public/image/balance_wallet.svg")}l.find("#move_path").html(n).off(),i.find("#move_path").click(function(){t&&t()})},s.setMenuCenter=function(e,t){return l.getFrame().setMenuCenter(e,t)},s.on("page_open",function(e,t){s.setMenuCenter(null),l.find(`[page-link="${t.getFile()}"]`).addClass("actived"),s.setPagePath(t.title,null)}),s.on("page_load",function(e,t){}),s.on("page_close",function(e,t){var a=l&&l.find("#balance_sum");a.find("input").off("change"),a.find("[for=sum_deposit]").html(""),a.find("[for=sum_withdraw]").html("")}),s.openPage("https://lclasser.github.io/sbalance/pages/main/balance/page.daily.html","일별")}function onPageClose(e){stracer("page.balance.html").dbg("onPageClose:",e)}</script>