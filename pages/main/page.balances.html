<div page-declare=dpage class="w-100 h-100" onload=onPageLoad(this) onclose=onPageClose(this)><style>#page-balance .daily-button{color:inherit;font-weight:600!important;line-height:20px;letter-spacing:-.03em;padding:0 5px;font-size:var(--theme-font-size-3);border:0}#page-balance .daily-type{font-family:Noto Sans;font-weight:400!important;font-size:var(--theme-font-size-3);line-height:20px;opacity:1;text-align:center;padding:7px 5px;opacity:1;overflow:hidden;cursor:pointer;color:#dad5d1;border-style:solid;border-width:0;border-color:#dbd5d2;border-top-width:1px;border-bottom-width:1px;border-left-width:1px;user-select:none;-webkit-user-select:none}#page-balance .daily-type:first-child{border-top-left-radius:4px;border-bottom-left-radius:4px;border-left-width:1px}#page-balance .daily-type:last-child{border-top-right-radius:4px;border-bottom-right-radius:4px;border-right-width:1px}#page-balance .daily-type.actived{color:#222223;background:linear-gradient(#ffc84c,#fc8032);font-weight:500!important;border-color:transparent;border-top-color:#ffc84c;border-bottom-color:#fc8032}#page-balance .daily-type.actived+.daily-type{--border-color:#3C97F5;border-left-color:transparent}#page-balance .daily-type:hover:not(.actived){color:#575552;background:#343434}#page-balance #balance_sum{min-height:35px;font-weight:200!important;font-size:var(--theme-font-size-1)}#page-balance #balance_sum #sum_withdraw{color:#fff;border-radius:4px;background-color:#3c97f5;padding:0 4px;width:108px;cursor:pointer;line-height:24px}#page-balance #balance_sum #sum_deposit{color:#fff;border-radius:4px;background-color:#f96c4e;padding:0 4px;width:108px;cursor:pointer;line-height:24px}</style><div class="d-flex w-100 flex-column h-100" id=page-balance><div class="d-flex w-100 flex-column p-1"><div class="d-flex w-100"><div class=d-flex><button type=button class="transparent-bgcolor p-0" id=btn_month_prev><img style=height:24px src=https://lclasser.github.io/sbalance/public/image/arrow_left.svg></button><div class=d-flex style=position:relative><input type=button class="transparent-bgcolor daily-button date datetimepicker-input" id=btn_month_date data-toggle=datetimepicker data-target=btn_month_date></div><button type=button class="transparent-bgcolor p-0" id=btn_month_next><img style=height:24px src=https://lclasser.github.io/sbalance/public/image/arrow_right.svg></button></div><div class="d-flex ms-1"><div class=daily-type page-link=https://lclasser.github.io/sbalance/pages/main/balance/page.daily.html>일별</div><div class=daily-type page-link=https://lclasser.github.io/sbalance/pages/main/balance/page.calendar.html>달력</div><div class=daily-type page-link=https://lclasser.github.io/sbalance/pages/main/balance/page.category.html>분류</div><div class=daily-type page-link=https://lclasser.github.io/sbalance/pages/main/balance/page.wallet.html>지갑</div></div><div class="d-flex h-100 me-1 ms-auto"><img src=https://lclasser.github.io/sbalance/public/image/filter_empty.svg id=balance_filter></div></div><div class="d-flex flex-wrap m-0 mt-1" id=balance_sum><div class="d-flex align-items-end ps-1 flex-grow-1 flex-shrink-1" style=flex-basis:30%;min-width:30%><span class="border-bottom text-start text-truncate" id=move_path></span></div><div class="d-flex align-items-end ps-1 ms-auto"><span class=text-end checked=checked id=sum_deposit></span> <span class=p-2></span> <span class=text-end checked=checked id=sum_withdraw></span></div></div></div><div class=p-1 style=flex:1;overflow:auto id=balance_body></div></div></div><script>function onPageLoad(e){STracer("page.balance.html").log("onPageLoad:",e);var i=e.getPage(),n=(i.find(".daily-type").click(function(e){null!=$(this).attr("page-link")&&(i.find(".daily-type").removeClass("actived"),$(this).addClass("actived"))}),i.getReference("balances",{now_date:new Date}));function t(){1!=Object.values(n.filter).some(function(e){if(0<e.length)return a.prop("src","https://lclasser.github.io/sbalance/public/image/filter_exist.svg"),!0})&&a.prop("src","https://lclasser.github.io/sbalance/public/image/filter_empty.svg")}null==n.now_date&&(n.now_date=new Date);var a=i.find("#balance_filter"),o=(null!=a&&(t(),a.click(function(){window.popver("https://lclasser.github.io/sbalance/pages/main/popver/filter.balance.html",n.filter,function(e){null!=e&&(console.log("presult:",e),n.filter=e,t(),i.getFrame().send("refresh"))})})),i.find("#balance_sum"));function l(e){i.find("#btn_month_date").datetimepicker("date",n.now_date),1==e&&i.getFrame().send("refresh")}null!=o&&(o[0].isDeposit=function(){return"checked"==o.find("#sum_deposit").attr("checked")},o[0].isWithdraw=function(){return"checked"==o.find("#sum_withdraw").attr("checked")},o[0].getSummaryClass=function(){var e=[" "];return 1==o[0].isDeposit()&&e.push("D"),1==o[0].isWithdraw()&&e.push("W"),e},o[0].setSummaryResult=function(e,t){e&&(o.find("#sum_deposit").html(amountFormat(null,e.sum_deposit)),o.find("#sum_withdraw").html(amountFormat(null,e.sum_withdraw))),o.find("#sum_deposit").off(),o.find("#sum_withdraw").off(),o.find("#sum_deposit, #sum_withdraw").click(function(){$(this).attr("checked")?$(this).attr("checked",!1):$(this).attr("checked","checked"),t&&t()})}),i.find("#btn_month_date").datetimepicker({dayViewHeaderFormat:"YYYY-MM",format:"YYYY년 MM월",locale:"ko",date:new Date,icons:{today:"fa-solid fa-calendar-check"},buttons:{showToday:!0}}),i.find("#btn_month_date").on("change.datetimepicker",({date:e,oldDate:t})=>{console.log("New date",e.toDate()),console.log("Old date",t),e.toDate()!=t.toDate()&&(n.now_date=e.toDate(),l(!0))}),i.find("#btn_month_prev").click(function(){n.now_date.setMonth(n.now_date.getMonth()-1,1),l(!0)}),i.find("#btn_month_next").click(function(){n.now_date.setMonth(n.now_date.getMonth()+1),l(!0)}),l(!1);var c=i.createFrame("balance_body");c.getBalanceSum=function(){return i.find("#balance_sum")},c.setPagePath=function(e,t){var n,a="";for(1!=Array.isArray(e)&&(e=[e]),n=0;n<e.length;n++)0<n&&(a+="> "),a+=e[n];i.find("#move_path").html(a).off(),o.find("#move_path").click(function(){t&&t()})},c.setMenuCenter=function(e,t){return i.getFrame().setMenuCenter(e,t)},c.on("page_open",function(e,t){c.setMenuCenter(null),i.find(`[page-link="${t.getFile()}"]`).addClass("actived"),c.setPagePath(t.title,null)}),c.on("page_load",function(e,t){}),c.on("page_close",function(e,t){var n=i&&i.find("#balance_sum");n.find("input").off("change"),n.find("[for=sum_deposit]").html(""),n.find("[for=sum_withdraw]").html("")}),c.openPage("https://lclasser.github.io/sbalance/pages/main/balance/page.daily.html","일별")}function onPageClose(e){STracer("page.balance.html").dbg("onPageClose:",e)}</script>